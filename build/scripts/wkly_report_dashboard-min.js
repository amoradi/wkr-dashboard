"use strict";(function(){function e(e,t,r){do{if(!e||1!==e.nodeType)return!1;if(e.matches(t))return e;if(e=e.parentNode,e.className===r)return!1}while(e)}var t={1:"satisfaction",2:"workload",3:"productivity",4:"clarity",5:"stress"},r={spreadsheetData:"https://spreadsheets.google.com/feeds/list/1HRQm4opZYzyF8zzJiZOFZCQKcTas5Fw6CU8twSsy-3k/3/public/basic?alt=json",docFrag:document.createDocumentFragment(),dashboardDimensions:[["satisfactioninverse","satisfaction"],["workloadinverse","workload"],["prodinverse","productivity"],["clarityinverse","clarity"],["stressinverse","stresslevel"]],dimensionMap:t,mainClassName:"TeamMemberScores-colMain",avgScoreClassName:"Aggregate-aggregateScore",scoresContainerClassName:"TeamMemberScores-scores",headingClassName:"TeamMemberScores-heading",rowClass:"TeamMemberScores-row",rowClassWrap:"TeamMemberScores-rowWrap",headShotClassName:"TeamMemberScores-headShot",nameClassName:"u-small-label TeamMemberScores-name",noScoresClassName:"TeamMemberScores-noScores",noScoresHeadingText:"Didn't Fill Out Survey",chartOpts:{largeHeightWidth:"100px",height:"60px",width:"60px",cellClassName:"TeamMemberScores-cell",chartClassName:"TeamMemberScores-chart",colors:{inverseColor:"#d3d3d3",activeColors:[{value:"#c26263",condition:function(e){return e<=35}},{value:"#e3e448",condition:function(e){return e>36&&e<=50}},{value:"#61c275",condition:function(e){return e>50}}]}}};document.querySelector(".TeamMemberScores-scores").addEventListener("click",function(t){var r=e(t.target,".TeamMemberScores-row > div:first-child","TeamMemberScores-scores");if(r){var a=r.getAttribute("data-detail"),o=r.childNodes[1].getAttribute("data-name"),n=r.childNodes[0].style.backgroundImage,s=r.childNodes[0].style.borderColor;window.location.href="detail.html?name="+o+"&image="+n+"&borderColor="+s+"&"+a}});var a=function(e){var t=[r.chartOpts.colors.inverseColor];return r.chartOpts.colors.activeColors.some(function(r){var a=r.condition(e[1]);if(a)return t.push(r.value),!0}),t},o=function(e,t,a){var o=document.createElement("canvas"),n=o.getContext("2d"),s=document.createElement("div");return new Chart(n,{type:"doughnut",data:{datasets:[{data:e,backgroundColor:t}]},options:{tooltips:{enabled:!1},animation:{animateRotate:!0,animateScale:!0},cutoutPercentage:70,responsive:!1,maintainAspectRatio:!1}}),s.setAttribute("data-avg-score",e[1]),o.setAttribute("data-score",e[1]),a?o.style.width=o.style.height=a:(o.style.width=r.chartOpts.height,o.style.height=r.chartOpts.width),o.className=r.chartOpts.chartClassName,s.className=r.chartOpts.cellClassName,s.appendChild(o),s};!function(){function e(e){window.ReportIncompleteCount=0,window.ReportMemberCount=0,window.ReportAverages={avgScore:[],satisfaction:[],workload:[],productivity:[],clarity:[],stress:[]},t(e.spreadsheetData)}function t(e){axios.get(e).then(function(e){n(e.data)})}function n(e){e.feed.entry.forEach(function(e,t){var a=e.content.$t,o=e.title.$t,n=u(a),s=n.headshot;return ReportMemberCount=t+1,d(a)?(ReportIncompleteCount++,1==ReportIncompleteCount&&(window.NoScoresMembers=l()),m(o,s,!0),!0):(m(o,s),void p(n,r.dashboardDimensions))}),ReportIncompleteCount&&(g(NoScores,NoScoresMembers),g(document.querySelector("."+r.mainClassName),NoScores)),i()}function s(e,t){return e+t}function c(e,t){var e=e.map(function(e){return parseInt(e,10)});return Math.round(e.reduce(s,0)/t)}function i(){var e=c(ReportAverages.avgScore,ReportAverages.avgScore.length),t=document.querySelector(".Aggregate-aggregateCompleted"),n=document.createElement("span");n.className="Aggregate-completedPercent",document.querySelector("."+r.avgScoreClassName).innerHTML=""+e,document.querySelector(".Aggregate-aggregate").style.backgroundColor=a([0,e])[1],n.innerHTML=Math.round((ReportMemberCount-ReportIncompleteCount)/ReportMemberCount*100)+"%",t.insertBefore(n,t.childNodes[0]);for(var s in ReportAverages)if(ReportAverages.hasOwnProperty(s)&&"avgScore"!==s){var i=c(ReportAverages[s],ReportAverages[s].length),l=100-i,d=[l,i],m=document.querySelector("."+s);g(m,o(d,a(d),r.chartOpts.largeHeightWidth,i))}}function l(){window.NoScores=document.createElement("section");var e=document.createElement("h2"),t=document.createElement("div");return NoScores.className=r.noScoresClassName,e.className=r.headingClassName,e.innerHTML=r.noScoresHeadingText,NoScores.appendChild(e),t.className=r.rowClass+" "+r.rowClassWrap,t}function d(e){var t=/: x/g;return t.test(e)}function m(e,t,a){var o=document.createElement("div"),n=document.createElement("span"),s=document.createElement("span");o.className=r.chartOpts.cellClassName,n.className=r.headShotClassName,n.style.backgroundImage="url("+t+")",a&&(o.setAttribute("data-incomplete-report","true"),n.style.borderColor=r.chartOpts.colors.activeColors[0].value),s.className=r.nameClassName,s.innerHTML=e,s.setAttribute("data-name",e),o.appendChild(n),o.appendChild(s);var c=a?window.NoScoresMembers:r.docFrag;g(c,o)}function u(e){var t=e.split(","),r={};return t.forEach(function(e){e=e.split(": "),r[e[0].trim()]=e[1]}),r}function p(e,t){t.forEach(function(t){var r=[parseInt(e[t[0]],10),parseInt(e[t[1]],10)];h(r)}),v(r.docFrag,r.scoresContainerClassName)}function h(e){Number.isInteger(e[0])&&Number.isInteger(e[1])&&g(r.docFrag,o(e,a(e)))}function g(e,t){e.appendChild(t)}function v(e,t){var a=document.createElement("div");S(e),C(e),a.className=r.rowClass,a.appendChild(e),document.querySelector("."+t).appendChild(a)}function C(e){for(var t=e.querySelectorAll("."+r.chartOpts.cellClassName),a=[],o=0,n=t.length;o<n;o++)if(o>0){t[o].setAttribute("data-cell",o);var s=t[o].firstChild.getAttribute("data-score");f(o,s),a.push(r.dimensionMap[o]+"="+s)}t[0].setAttribute("data-detail",a.join("&"))}function f(e,t){var a=r.dimensionMap;window.ReportAverages[a[e]].push(t)}function S(e){var t=b(e),o="."+r.headShotClassName,n=document.createElement("span"),s=a([0,t])[1];ReportAverages.avgScore.push(t),n.style.color=s,n.innerHTML="<br />"+t,e.querySelector(o).style.borderColor=s,e.querySelector(o+" + span").appendChild(n)}function b(e){for(var t=e.querySelectorAll("[data-score]"),r=t.length,a=0,o=0;o<r;o++)a+=parseInt(t[o].getAttribute("data-score"),10);return parseInt(a/r,10)}e(r),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}}()}).call(void 0);