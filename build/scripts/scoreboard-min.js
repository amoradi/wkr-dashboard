function initDashboard(e){window.ReportIncompleteCount=0,fetchWeeklyReportsData(e.spreadsheetData)}function fetchWeeklyReportsData(e){axios.get(e).then(function(e){parseTeamMemberScores(e.data)}).catch(function(e){console.log(e)})}function parseTeamMemberScores(e){e.feed.entry.forEach(function(e){var a=e.content.$t,t=e.title.$t,o=toJson(a),s=o.headshot;return isReportIncomplete(a)?(ReportIncompleteCount++,1==ReportIncompleteCount&&(window.NoScoresSection=createNoScoresSection()),drawTeamMember(t,s,!0),!0):(drawTeamMember(t,s),void createTeamMemberCharts(o,dashboardOpts.dashboardDimensions))}),ReportIncompleteCount&&(appendNode(NoScoresDocFrag,NoScoresSection),appendNode(document.getElementsByClassName(dashboardOpts.mainClassName)[0],NoScoresDocFrag))}function createNoScoresSection(){window.NoScoresDocFrag=document.createDocumentFragment();var e=document.createElement("section"),a=document.createElement("h2"),t=document.createElement("div");return e.className=dashboardOpts.noScoresClassName,a.className=dashboardOpts.headingClassName,a.innerHTML=dashboardOpts.noScoresHeadingText,e.appendChild(a),t.className=dashboardOpts.rowClass+" "+dashboardOpts.rowClassWrap,e.appendChild(t),appendNode(NoScoresDocFrag,e),t}function isReportIncomplete(e){var a=/: x/g;return a.test(e)}function drawTeamMember(e,a,t,o){var s=document.createElement("div"),r=document.createElement("span"),n=document.createElement("span");s.className=dashboardOpts.chartOpts.cellClassName,r.className=dashboardOpts.headShotClassName,r.style.backgroundImage="url("+a+")",n.className=dashboardOpts.nameClassName,n.innerHTML=e,s.appendChild(r),s.appendChild(n);var c=t?window.NoScoresSection:dashboardOpts.docFrag;appendNode(c,s)}function toJson(e){var a=e.split(","),t={};return a.forEach(function(e){e=e.split(": "),t[e[0].trim()]=e[1]}),t}function createTeamMemberCharts(e,a){a.forEach(function(a){var t=[parseInt(e[a[0]],10),parseInt(e[a[1]],10)];filterInvalidMemberFields(t)}),drawTeamMemberScores(dashboardOpts.docFrag,dashboardOpts.scoresContainerClassName)}function filterInvalidMemberFields(e){Number.isInteger(e[0])&&Number.isInteger(e[1])&&appendNode(dashboardOpts.docFrag,doughnutChartFactory(e,calculateColor(e)))}function calculateColor(e){var a=[dashboardOpts.chartOpts.colors.inverseColor];return dashboardOpts.chartOpts.colors.activeColors.some(function(t){var o=t.condition(e[1]);if(o)return a.push(t.value),!0}),a}function doughnutChartFactory(e,a){var t=document.createElement("canvas"),o=t.getContext("2d"),s=document.createElement("div");return new Chart(o,{type:"doughnut",data:{datasets:[{data:e,backgroundColor:a}]},options:{tooltips:{enabled:!1},responsive:!1,animation:{animateRotate:!0,animateScale:!0},cutoutPercentage:70,maintainAspectRatio:!1}}),t.style.width=dashboardOpts.chartOpts.height,t.style.height=dashboardOpts.chartOpts.width,t.className=dashboardOpts.chartOpts.chartClassName,s.className=dashboardOpts.chartOpts.cellClassName,s.appendChild(t),s}function drawDidNotFillOut(){}function appendNode(e,a){e.appendChild(a)}function drawTeamMemberScores(e,a){var t=document.createElement("div");t.className=dashboardOpts.rowClass,t.appendChild(e),document.getElementsByClassName(a)[0].appendChild(t)}var dashboardOpts={spreadsheetData:"https://spreadsheets.google.com/feeds/list/1HRQm4opZYzyF8zzJiZOFZCQKcTas5Fw6CU8twSsy-3k/3/public/basic?alt=json",docFrag:document.createDocumentFragment(),dashboardDimensions:[["satisfactioninverse","satisfaction"],["workloadinverse","workload"],["prodinverse","productivity"],["clarityinverse","clarity"],["stressinverse","stresslevel"]],mainClassName:"TeamMemberScores-colMain",scoresContainerClassName:"TeamMemberScores-scores",headingClassName:"TeamMemberScores-heading",rowClass:"TeamMemberScores-row",rowClassWrap:"TeamMemberScores-rowWrap",headShotClassName:"TeamMemberScores-headShot",nameClassName:"u-small-label TeamMemberScores-name",noScoresClassName:"TeamMemberScores-noScores",noScoresHeadingText:"Didn't Fill Out Survey",chartOpts:{height:"75px",width:"75px",cellClassName:"TeamMemberScores-cell",chartClassName:"TeamMemberScores-chart",colors:{inverseColor:"#d3d3d3",activeColors:[{value:"#c26263",condition:function(e){return e<=35}},{value:"#e3e448",condition:function(e){return e>36&&e<=50}},{value:"#61c275",condition:function(e){return e>50}}]}}};initDashboard(dashboardOpts),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};